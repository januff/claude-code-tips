---
created: 2026-01-10
author: "@nummanali"
display_name: "Numman Ali"
tags:
  - type/screenshot
  - type/thread
likes: 1164
views: 101576
engagement_score: 3219
url: "https://x.com/nummanali/status/2010042788566720955"
---

> [!tweet] @nummanali Â· Jan 10, 2026
> Claude Code v2.1.3 has solved the compaction issue
> 
> Auto compaction works very well if you start with Plan Mode and explicitly ask the model to make a Comprehensive To Do list
> 
> Plans and To Dos persist across compaction
> 
> Runtime was 52m 54s with beautifully written code
> 
> â›©ï¸ https://t.co/NxYGfrX79L
>
> ---
> *@nummanali Â· 2026-01-10T17:36:02+00:00:*
> https://t.co/2F3MQosZvd
>
> Likes: 1,164 Â· Replies: 45 Â· Reposts: 62

## Summary

This Claude Code tip highlights a strategy to effectively manage compaction issues by starting with 'Plan Mode' and requesting a 'Comprehensive To Do list'. This ensures that your plans and To-Dos persist even after compaction, leading to efficient code generation as demonstrated by a reported runtime of approximately 53 minutes. This method allows for well-structured code output due to the prior comprehensive planning stage.

## Media

![Media](https://pbs.twimg.com/media/G-UaIfeWgAAgAFJ.jpg)







## Replies

> [!reply] @nummanali Â· 2025-12-12T10:09:25+00:00
> Agent-Native Software Development Lifecycle Pipeline
> 
> Super nervous and super excited to start building this completely automated workflow for RetailBook
> 
> Linear Ticket 
> â†“
> Planning Agents
> â†“
> Build Agents
> â†“
> Review Agents
> â†“
> QA Agents 
> â†“
> Human Review
> 
> Be future ready folks https://t.co/dXMQpgYEmI
> *77 likes*

> [!reply] @alexinbinary Â· 2026-01-10T21:54:13+00:00
> @nummanali Can they solve the flashing screens ðŸ˜­
> *13 likes*

> [!tip]+ â†©ï¸ @nummanali Â· 2026-01-10T22:13:27+00:00

> @alexinbinary On that day https://t.co/9bfZojhlMs

> [!reply] @mysticaltech Â· 2026-01-10T23:15:40+00:00
> @nummanali Wow, excellent. That de-prioritizes the rest of experimental methods for me quite a bit. This and the Anthropic shipped Ralph skill should be enough to do a lot already.
> *6 likes*

> [!tip]+ â†©ï¸ @nummanali Â· 2026-01-10T23:19:06+00:00

> @mysticaltech There really is no need for complex set ups for 90% of people

> [!reply] @elijahbowie Â· 2026-01-10T21:45:49+00:00
> @nummanali Now ask it what all it didnâ€™t complete from the plan.
> 
> Unfortunately when it compacts it does lose bits, especially if it compacts in the middle of a task.
> 
> The plan is usually 85% complete
> *6 likes*

> [!tip]+ â†©ï¸ @nummanali Â· 2026-01-10T22:10:58+00:00

> @elijahbowie I get passed that by telling it to out in checkpoint todo that trigger sub agent reviews 
> 
> Last run was 57mins and perfect outcome

> [!reply] @wagsify Â· 2026-01-11T02:50:24+00:00
> @nummanali Yes. I've run 153 sessions in the same window for over 36 hours with auto-compaction, and several times it picked up on the to-dos from before compaction and completed the rest of the implementation in a new session without breaking a sweat.
> *5 likes*

> [!tip]+ â†©ï¸ @nummanali Â· 2026-01-11T05:14:54+00:00

> @dctmfoo Wow thatâ€™s amazing!

> [!reply] @oikon48 Â· 2026-01-11T05:34:40+00:00
> @nummanali I totally agree. The current Plan mode is becoming more like the SDD approach, and Claude is properly referring to this plan document from the Nov. version.
> *3 likes*

> [!tip]+ â†©ï¸ @nummanali Â· 2026-01-11T06:37:16+00:00

> @oikon48 You donâ€™t feel any difference in the new compaction algorithm? It was released in 2.1.0 I believe 
> 
> I never used auto compact as it felt too lossy 
> But this recent update has showed a change

> [!reply] @ThinkBotHQ Â· 2026-01-11T03:03:09+00:00
> @nummanali @bcherny lol @bcherny gaslit me the other day when I reported this bug a week or two ago
> *2 likes*

> [!tip]+ â†©ï¸ @nummanali Â· 2026-01-11T05:18:53+00:00

> @ThinkBotHQ @bcherny What do you mean?

> [!reply] @justBCheung Â· 2026-01-10T18:05:54+00:00
> @nummanali I see youâ€™re cooking up your own orchestration tool? ðŸ‘€
> *2 likes*

> [!tip]+ â†©ï¸ @nummanali Â· 2026-01-10T18:11:33+00:00

> @justBCheung Yes I am, itâ€™s called Spark
> Coming in a week or two, fully open source 
> 
> What you see above is actually a refactor on my RetailBook coding agent which has strict guidelines and opinionated towards an enterprise codebase

> [!reply] @jgarzik Â· 2026-01-11T20:55:59+00:00
> @nummanali Always Plan First.
> *1 likes*

> [!tip]+ â†©ï¸ @nummanali Â· 2026-01-11T21:01:26+00:00

> @jgarzik never mess with a man with a plan https://t.co/SSvQYU2Stn

> [!reply] @ariccio Â· 2026-01-10T23:54:18+00:00
> @nummanali Can you be a bit more specific what you mean by plans and todos persisting across compaction? Plans have persisted across compaction for like two months now?
> *1 likes*

> [!tip]+ â†©ï¸ @nummanali Â· 2026-01-10T23:56:57+00:00

> Exactly that 
> 
> Plans and todo list persist post compaction 
> 
> With the new compaction algorithm, Claude is able to continue with them with better adherence 
> 
> It was marked in the changelog that they upgraded it 
> 
> After the compaction I notice both a reference and read files labels 
> 
> These are much more appropriate compared to previous versions

> [!reply] @AI_Integrated_S Â· 2026-01-10T21:39:48+00:00
> @nummanali This is my new work flow. With some creative hooks that process convo data in real time and  sorting it in a Sturctured way.  Like s secretary taking notes live during the convo.
> *1 likes*

> [!tip]+ â†©ï¸ @nummanali Â· 2026-01-10T21:48:42+00:00

> @AI_Integrated_S https://t.co/3V0NzMii2n

> [!reply] @HankYeomans Â· 2026-01-11T02:10:35+00:00
> @nummanali @bcherny I noticed it got better. I always do a research, state, plan, https://t.co/Hs7JAkyHOf for a task and I keep things within those 4 files. Itâ€™s better about that and pulling from the plan and todo
> *1 likes*

> [!tip]+ â†©ï¸ @nummanali Â· 2026-01-11T05:10:44+00:00

> @HankYeomans @bcherny Sweet

> [!reply] @entrecurious Â· 2026-01-11T04:02:47+00:00
> @nummanali I know "Todos" are a claude code primitive, but when you say "Plan" is persisted, can you expand? Is a formal "Plan" a primitive? How is it persisted? Where?
> *1 likes*

> [!tip]+ â†©ï¸ @nummanali Â· 2026-01-11T05:25:26+00:00

> @entrecurious Shift + Tab takes you in plan mode
> 
> It uses an adapted prompt to guide Claude in gathering all requirements from you
> 
> It saves it in the global ~/.Claude folder
> 
> You can ask it to paste it in the repo if you want to keep

> [!reply] @Markojak Â· 2026-01-10T22:10:42+00:00
> @nummanali Does this work in headless mode though
> I have had compaction issues in -p mode
> *1 likes*

> [!tip]+ â†©ï¸ @nummanali Â· 2026-01-10T22:14:23+00:00

> @markojak Iâ€™m not sure if todowrite is exposed headless 
> 
> Will need to check

> [!reply] @hulkworks Â· 2026-01-11T13:55:40+00:00
> @nummanali Sounds like you cracked the code literally and figuratively-sometimes the best breakthroughs come from revisiting the basics.
> *1 likes*

> [!tip]+ â†©ï¸ @nummanali Â· 2026-01-11T14:10:29+00:00

> @hulkworks Simple solutions often beat complex solutions


> [!metrics]- Engagement & Metadata
> **Likes:** 1,164 Â· **Replies:** 45 Â· **Reposts:** 62 Â· **Views:** 101,576
> **Engagement Score:** 3,219
>
> **Source:** tips Â· **Quality:** â€”/10
> **Curated:** âœ— Â· **Reply:** âœ—
> **ID:** [2010042788566720955](https://x.com/nummanali/status/2010042788566720955)